<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Placeholder Videos</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .container {
            background: #0a0a0a;
            border: 2px solid #00ff00;
            padding: 30px;
            border-radius: 5px;
        }
        .feed-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #1a1a1a;
            border: 1px solid #00ff00;
        }
        .feed-item h3 {
            margin-top: 0;
            color: #00ff00;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        button:hover {
            background: #00aa00;
        }
        button:disabled {
            background: #555;
            color: #888;
            cursor: not-allowed;
        }
        .status {
            display: inline-block;
            margin-left: 10px;
            font-size: 12px;
        }
        canvas {
            display: none;
        }
        .info {
            background: rgba(255, 255, 0, 0.1);
            border: 1px solid #ffff00;
            padding: 15px;
            margin-bottom: 20px;
            color: #ffff00;
        }
        .generate-all {
            text-align: center;
            margin: 30px 0;
        }
        .generate-all button {
            font-size: 16px;
            padding: 15px 30px;
        }
    </style>
</head>
<body>
    <h1>ðŸ“¹ Placeholder Video Generator</h1>

    <div class="container">
        <div class="info">
            <strong>Instructions:</strong><br>
            1. Click "Generate All Videos" to create all 6 placeholder videos<br>
            2. Each video will be downloaded automatically<br>
            3. Move the downloaded files to the /videos/ directory<br>
            4. Videos are ~5 seconds, grayscale, with animated surveillance-style effects
        </div>

        <div class="generate-all">
            <button id="generateAll" onclick="generateAllVideos()">Generate All Videos</button>
        </div>

        <div id="feeds"></div>
    </div>

    <canvas id="canvas" width="640" height="480"></canvas>

    <script>
        const feeds = [
            { id: 1, name: 'feed1.mp4', label: 'CAM-01 // HALLWAY', scene: 'hallway' },
            { id: 2, name: 'feed2.mp4', label: 'CAM-02 // ENTRANCE', scene: 'entrance' },
            { id: 3, name: 'feed3.mp4', label: 'CAM-03 // OFFICE', scene: 'office' },
            { id: 4, name: 'feed4.mp4', label: 'CAM-04 // STAIRWELL', scene: 'stairwell' },
            { id: 5, name: 'feed5.mp4', label: 'CAM-05 // PARKING', scene: 'parking' },
            { id: 6, name: 'feed6.mp4', label: 'CAM-06 // LOBBY', scene: 'lobby' }
        ];

        // Create UI for each feed
        const feedsContainer = document.getElementById('feeds');
        feeds.forEach(feed => {
            const div = document.createElement('div');
            div.className = 'feed-item';
            div.innerHTML = `
                <h3>${feed.label}</h3>
                <button onclick="generateVideo(${feed.id})">Generate Video</button>
                <span class="status" id="status${feed.id}"></span>
            `;
            feedsContainer.appendChild(div);
        });

        function drawFrame(ctx, canvas, frame, scene) {
            const width = canvas.width;
            const height = canvas.height;

            // Dark background
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, width, height);

            // Add timestamp
            const now = new Date();
            const timestamp = now.toLocaleTimeString('en-US', { hour12: false });
            ctx.fillStyle = '#00ff00';
            ctx.font = '14px Courier New';
            ctx.fillText(timestamp, width - 100, 30);

            // Add camera label
            ctx.fillText(`CAM-0${feeds.find(f => f.scene === scene).id}`, 10, 30);

            // Draw scene-specific content
            const time = frame / 30; // Assuming 30fps

            switch(scene) {
                case 'hallway':
                    // Draw a swaying shape (person silhouette)
                    ctx.fillStyle = '#2a2a2a';
                    const sway = Math.sin(time * 2) * 10;
                    ctx.fillRect(200 + sway, 250, 30, 150);
                    break;

                case 'entrance':
                    // Draw door with EXIT sign
                    ctx.fillStyle = '#ff0000';
                    ctx.font = 'bold 20px Courier New';
                    ctx.fillText('EXIT', width - 80, 50);
                    ctx.fillStyle = '#1a1a1a';
                    ctx.fillRect(width - 150, height - 200, 80, 180);
                    break;

                case 'office':
                    // Draw desk
                    ctx.fillStyle = '#1a1a1a';
                    ctx.fillRect(width/2 - 80, height/2 - 40, 160, 80);
                    // Draw computer screen (flickering)
                    const flicker = Math.random() > 0.5 ? '#003300' : '#002200';
                    ctx.fillStyle = flicker;
                    ctx.fillRect(width/2 - 30, height/2 - 60, 60, 40);
                    break;

                case 'stairwell':
                    // Draw stairs
                    ctx.fillStyle = '#1a1a1a';
                    for (let i = 0; i < 5; i++) {
                        ctx.fillRect(100, 100 + i * 40, 200 + i * 30, 30);
                    }
                    break;

                case 'parking':
                    // Draw parking space lines
                    ctx.strokeStyle = '#2a2a2a';
                    ctx.lineWidth = 3;
                    for (let i = 0; i < 4; i++) {
                        ctx.beginPath();
                        ctx.moveTo(100 + i * 120, 200);
                        ctx.lineTo(100 + i * 120, 400);
                        ctx.stroke();
                    }
                    // Draw a car shape
                    ctx.fillStyle = '#1a1a1a';
                    ctx.fillRect(130, 250, 80, 120);
                    break;

                case 'lobby':
                    // Draw reception desk
                    ctx.fillStyle = '#1a1a1a';
                    ctx.fillRect(width/2 - 100, height - 200, 200, 100);
                    // Draw plant
                    ctx.fillStyle = '#0a3a0a';
                    ctx.beginPath();
                    ctx.arc(100, height - 100, 40, 0, Math.PI * 2);
                    ctx.fill();
                    break;
            }

            // Add static/noise effect
            for (let i = 0; i < 200; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const brightness = Math.random() * 50;
                ctx.fillStyle = `rgba(${brightness}, ${brightness}, ${brightness}, 0.3)`;
                ctx.fillRect(x, y, 1, 1);
            }

            // Add scanlines
            ctx.fillStyle = 'rgba(0, 255, 0, 0.03)';
            for (let i = 0; i < height; i += 4) {
                ctx.fillRect(0, i, width, 2);
            }
        }

        async function generateVideo(feedId) {
            const feed = feeds.find(f => f.id === feedId);
            const statusEl = document.getElementById(`status${feedId}`);
            statusEl.textContent = 'Generating...';

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            // Setup MediaRecorder
            const stream = canvas.captureStream(30); // 30 FPS
            const mediaRecorder = new MediaRecorder(stream, {
                mimeType: 'video/webm',
                videoBitsPerSecond: 2500000
            });

            const chunks = [];
            mediaRecorder.ondataavailable = (e) => {
                if (e.data.size > 0) {
                    chunks.push(e.data);
                }
            };

            mediaRecorder.onstop = () => {
                const blob = new Blob(chunks, { type: 'video/webm' });
                const url = URL.createObjectURL(blob);

                // Download the video
                const a = document.createElement('a');
                a.href = url;
                a.download = feed.name.replace('.mp4', '.webm');
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                statusEl.textContent = 'âœ“ Downloaded';
                statusEl.style.color = '#00ff00';
            };

            // Start recording
            mediaRecorder.start();

            // Render frames (5 seconds at 30fps = 150 frames)
            let frame = 0;
            const totalFrames = 150;
            const interval = setInterval(() => {
                drawFrame(ctx, canvas, frame, feed.scene);
                frame++;

                if (frame >= totalFrames) {
                    clearInterval(interval);
                    mediaRecorder.stop();
                }
            }, 1000 / 30);
        }

        async function generateAllVideos() {
            const button = document.getElementById('generateAll');
            button.disabled = true;
            button.textContent = 'Generating...';

            for (let i = 0; i < feeds.length; i++) {
                await new Promise(resolve => {
                    // Wait for current video to complete
                    const feed = feeds[i];
                    const statusEl = document.getElementById(`status${feed.id}`);

                    generateVideo(feed.id);

                    // Wait 6 seconds for video generation + download
                    setTimeout(resolve, 6000);
                });
            }

            button.disabled = false;
            button.textContent = 'Generate All Videos (Again)';
            alert('All videos generated! Check your downloads folder.\n\nNote: Videos are in .webm format. You may need to convert them to .mp4 or update the HTML to use .webm files instead.');
        }
    </script>
</body>
</html>
